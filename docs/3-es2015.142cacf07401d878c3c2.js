(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Cqzs:function(t,e,o){"use strict";o.r(e),o.d(e,"TaskDetailsPageModule",(function(){return N}));var i=o("ofXK"),n=o("TEn/"),a=o("tyNb"),s=o("mu6R"),l=o("fXoL"),r=o("i6c7"),b=o("3Pt+");function c(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div"),l.Nb(1,"ion-item"),l.Nb(2,"ion-label",2),l.lc(3),l.Mb(),l.Lb(4,"ion-input",29),l.Nb(5,"ion-button",30),l.Vb("click",(function(){l.hc(t);const o=e.index;return l.Xb().removeStaff(o)})),l.Lb(6,"ion-icon",31),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=e.index;l.Ab(3),l.mc("\u4eba\u54e1 ",t+1,""),l.Ab(1),l.cc("formControlName",t)}}function m(t,e){if(1&t){const t=l.Ob();l.Nb(0,"ion-footer"),l.Nb(1,"ion-toolbar",32),l.Nb(2,"ion-button",33),l.Vb("click",(function(){l.hc(t);const e=l.Xb();return e.onAddTask(e.taskForm)})),l.Lb(3,"ion-icon",34),l.lc(4," \u65b0\u589e\u4efb\u52d9 "),l.Mb(),l.Mb(),l.Mb()}}function u(t,e){if(1&t){const t=l.Ob();l.Nb(0,"ion-footer"),l.Nb(1,"ion-row",35),l.Nb(2,"ion-col",36),l.Nb(3,"ion-button",37),l.Vb("click",(function(){l.hc(t);const e=l.Xb();return e.onDeleteTask(e.taskForm.value)})),l.Lb(4,"ion-icon",38),l.lc(5," \u522a\u9664 "),l.Mb(),l.Mb(),l.Nb(6,"ion-col",36),l.Nb(7,"ion-button",39),l.Vb("click",(function(){l.hc(t);const e=l.Xb();return e.onUpdateTask(e.taskForm.value)})),l.Lb(8,"ion-icon",40),l.lc(9," \u5b58\u6a94 "),l.Mb(),l.Mb(),l.Mb(),l.Mb()}}let d=(()=>{class t{constructor(t){this.formBuilder=t,this.createTask=new l.n,this.updateTask=new l.n,this.deleteTask=new l.n,this.initialForm()}get taskControls(){return this.taskForm.controls}get staffs(){return this.taskForm.get("staffs")}ngOnInit(){}ngOnChanges(t){null==t.selectedTask.currentValue&&this.initialForm(),null!=t.selectedTask.currentValue&&this.updateForm(t.selectedTask.currentValue)}addStaff(){const t=this.formBuilder.control("");this.staffs.push(t)}removeStaff(t){this.staffs.removeAt(t)}onAddTask(t){this.createTask.emit(t.value)}onUpdateTask(t){this.updateTask.emit(t)}onDeleteTask(t){this.deleteTask.emit(t)}initialForm(){this.taskForm=this.formBuilder.group({id:[null],solarCalendar:[null],lunarCalendar:[null],caseName:[""],location:[""],hall:[""],event:[""],jobContent:this.formBuilder.group({funeral:[null],funeralWorkerCount:[null,[b.o.min(0)]],inOut:[null],inOutWorkerCount:[null,[b.o.min(0)]]}),arriveHallTime:[null],receiveBodyTime:[null],casketingTime:[null],moveCoffinTime:[null],worshipTime:[null],staffs:this.formBuilder.array([this.initSatffs()]),remarks:[""],leader:[""],isCaseClosed:[null]})}initSatffs(){return this.formBuilder.control("")}updateForm(t){if(null!=t){for(;0!==this.staffs.length;)this.staffs.removeAt(0);null!=t.staffs&&t.staffs.forEach(t=>this.staffs.push(new b.c(t))),this.taskForm.patchValue({id:void 0!==t.id?t.id:null,solarCalendar:void 0!==t.solarCalendar?t.solarCalendar:this.taskControls.solarCalendar.value,lunarCalendar:void 0!==t.lunarCalendar?t.lunarCalendar:this.taskControls.lunarCalendar,caseName:void 0!==t.caseName?t.caseName:this.taskControls.caseName.value,location:void 0!==t.location?t.location:this.taskControls.location.value,hall:void 0!==t.hall?t.hall:this.taskControls.hall.value,event:void 0!==t.event?t.event:this.taskControls.event.value,jobContent:void 0!==t.jobContent?t.jobContent:this.taskControls.jobContent.value,arriveHallTime:void 0!==t.arriveHallTime?t.arriveHallTime:this.taskControls.arriveHallTime.value,receiveBodyTime:void 0!==t.receiveBodyTime?t.receiveBodyTime:this.taskControls.receiveBodyTime.value,casketingTime:void 0!==t.casketingTime?t.casketingTime:this.taskControls.casketingTime.value,moveCoffinTime:void 0!==t.moveCoffinTime?t.moveCoffinTime:this.taskControls.moveCoffinTime.value,worshipTime:void 0!==t.worshipTime?t.worshipTime:this.taskControls.worshipTime.value,remarks:void 0!==t.remarks?t.remarks:this.taskControls.remarks.value,leader:void 0!==t.leader?t.leader:this.taskControls.leader.value,isCaseClosed:void 0!==t.isCaseClosed?t.isCaseClosed:this.taskControls.isCaseClosed.value}),this.taskForm.markAsPristine()}}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(b.b))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-task-form"]],inputs:{selectedTask:"selectedTask"},outputs:{createTask:"createTask",updateTask:"updateTask",deleteTask:"deleteTask"},features:[l.yb],decls:96,vars:4,consts:[[3,"formGroup"],["lines","full"],["position","floating"],["formControlName","solarCalendar"],["formControlName","lunarCalendar"],["formControlName","caseName","type","text"],["formControlName","hall","type","text"],["formControlName","arriveHallTime","displayFormat","h:mm a"],["formControlName","receiveBodyTime","displayFormat","h:mm a"],["formControlName","casketingTime","displayFormat","h:mm a"],["formControlName","moveCoffinTime","displayFormat","h:mm a"],["formControlName","worshipTime","displayFormat","h:mm a"],["lines","full","formGroupName","jobContent"],["formControlName","funeral","slot","start"],["formControlName","funeralWorkerCount","type","number"],["formControlName","inOut","slot","start"],["formControlName","inOutWorkerCount","type","number"],["lines","full","formArrayName","staffs"],[4,"ngFor","ngForOf"],["size","small","color","primary",3,"click"],["name","add-outline"],["formControlName","location","type","text"],["formControlName","event","type","text"],["formControlName","remarks","type","text"],["formControlName","leader","type","text"],["lines","full","formControlName","isCaseClosed"],["slot","start","value","onTheWay"],["slot","start","value","theEnd"],[4,"ngIf"],["type","text",3,"formControlName"],["slot","end","size","small","color","danger",3,"click"],["name","trash-outline"],["color","success"],["expand","full","fill","clear","color","light",3,"click"],["name","checkmark","slot","start"],["no-padding","","text-center",""],["size","6"],["expand","block","fill","outline","color","danger",3,"click"],["name","trash","slot","start"],["expand","block","fill","solid","color","success",3,"click"],["name","save","slot","start"]],template:function(t,e){1&t&&(l.Nb(0,"form",0),l.Nb(1,"ion-item",1),l.Nb(2,"ion-label",2),l.lc(3,"\u570b\u66c6"),l.Mb(),l.Lb(4,"ion-datetime",3),l.Mb(),l.Nb(5,"ion-item",1),l.Nb(6,"ion-label",2),l.lc(7,"\u8fb2\u66c6"),l.Mb(),l.Lb(8,"ion-datetime",4),l.Mb(),l.Nb(9,"ion-item",1),l.Nb(10,"ion-label",2),l.lc(11,"\u6848\u540d"),l.Mb(),l.Lb(12,"ion-input",5),l.Mb(),l.Nb(13,"ion-item",1),l.Nb(14,"ion-label",2),l.lc(15,"\u5ef3\u5802"),l.Mb(),l.Lb(16,"ion-input",6),l.Mb(),l.Nb(17,"ion-item",1),l.Nb(18,"ion-label",2),l.lc(19,"\u5230\u5ef3\u5802\u6642\u9593"),l.Mb(),l.Lb(20,"ion-datetime",7),l.Mb(),l.Nb(21,"ion-item",1),l.Nb(22,"ion-label",2),l.lc(23,"\u9818\u5c4d\u6642\u9593"),l.Mb(),l.Lb(24,"ion-datetime",8),l.Mb(),l.Nb(25,"ion-item",1),l.Nb(26,"ion-label",2),l.lc(27,"\u5165\u6bae\u6642\u9593"),l.Mb(),l.Lb(28,"ion-datetime",9),l.Mb(),l.Nb(29,"ion-item",1),l.Nb(30,"ion-label",2),l.lc(31,"\u52d5\u9077\u68fa\u6642\u9593"),l.Mb(),l.Lb(32,"ion-datetime",10),l.Mb(),l.Nb(33,"ion-item",1),l.Nb(34,"ion-label",2),l.lc(35,"\u5bb6\u796d\u6642\u9593"),l.Mb(),l.Lb(36,"ion-datetime",11),l.Mb(),l.Nb(37,"ion-list",12),l.Nb(38,"ion-list-header"),l.Nb(39,"ion-label"),l.lc(40,"\u5de5\u4f5c\u5167\u5bb9"),l.Mb(),l.Mb(),l.Nb(41,"ion-item"),l.Nb(42,"ion-label"),l.lc(43,"\u51fa\u6baf"),l.Mb(),l.Lb(44,"ion-checkbox",13),l.Mb(),l.Nb(45,"ion-item"),l.Nb(46,"ion-label",2),l.lc(47,"\u4eba\u6578"),l.Mb(),l.Lb(48,"ion-input",14),l.Mb(),l.Nb(49,"ion-item"),l.Nb(50,"ion-label"),l.lc(51,"\u51fa\u5165\u73fe"),l.Mb(),l.Lb(52,"ion-checkbox",15),l.Mb(),l.Nb(53,"ion-item"),l.Nb(54,"ion-label",2),l.lc(55,"\u4eba\u6578"),l.Mb(),l.Lb(56,"ion-input",16),l.Mb(),l.Mb(),l.Nb(57,"ion-list",1),l.Nb(58,"ion-list-header"),l.Nb(59,"ion-label"),l.lc(60,"\u5de5\u4f5c\u4eba\u54e1"),l.Mb(),l.Mb(),l.Nb(61,"ion-item",17),l.kc(62,c,7,2,"div",18),l.Mb(),l.Nb(63,"ion-button",19),l.Vb("click",(function(){return e.addStaff()})),l.Lb(64,"ion-icon",20),l.lc(65,"\u65b0\u589e\u4eba\u54e1 "),l.Mb(),l.Mb(),l.Nb(66,"ion-item",1),l.Nb(67,"ion-label",2),l.lc(68,"\u5730\u9ede"),l.Mb(),l.Lb(69,"ion-input",21),l.Mb(),l.Nb(70,"ion-item",1),l.Nb(71,"ion-label",2),l.lc(72,"\u4e8b\u4ef6"),l.Mb(),l.Lb(73,"ion-input",22),l.Mb(),l.Nb(74,"ion-item",1),l.Nb(75,"ion-label",2),l.lc(76,"\u5099\u8a3b"),l.Mb(),l.Lb(77,"ion-input",23),l.Mb(),l.Nb(78,"ion-item",1),l.Nb(79,"ion-label",2),l.lc(80,"\u57f7\u6848\u4eba"),l.Mb(),l.Lb(81,"ion-input",24),l.Mb(),l.Nb(82,"ion-radio-group",25),l.Nb(83,"ion-list-header"),l.Nb(84,"ion-label"),l.lc(85,"\u72c0\u614b"),l.Mb(),l.Mb(),l.Nb(86,"ion-item"),l.Nb(87,"ion-label"),l.lc(88,"\u9032\u884c\u4e2d"),l.Mb(),l.Lb(89,"ion-radio",26),l.Mb(),l.Nb(90,"ion-item"),l.Nb(91,"ion-label"),l.lc(92,"\u5df2\u7d50\u6848"),l.Mb(),l.Lb(93,"ion-radio",27),l.Mb(),l.Mb(),l.kc(94,m,5,0,"ion-footer",28),l.kc(95,u,10,0,"ion-footer",28),l.Mb()),2&t&&(l.cc("formGroup",e.taskForm),l.Ab(62),l.cc("ngForOf",e.staffs.controls),l.Ab(32),l.cc("ngIf",!e.taskControls.id.value),l.Ab(1),l.cc("ngIf",e.taskControls.id.value))},directives:[b.p,b.k,b.e,n.p,n.q,n.j,n.J,b.j,b.d,n.o,n.K,n.r,b.f,n.s,n.g,n.a,n.F,b.a,i.i,n.e,n.n,n.x,n.w,n.H,i.j,n.k,n.C,n.z,n.h],styles:[""]}),t})();const f=[{path:"",component:(()=>{class t{constructor(t,e,o,i){this.taskService=t,this.activateRoute=e,this.router=o,this.toastCtrl=i,this.task=new s.b,this.id=null}ngOnInit(){this.id=this.activateRoute.snapshot.paramMap.get("id"),this.id?this.taskService.getTask(this.id).subscribe(t=>{this.task=t}):this.task=null}showToast(t){this.toastCtrl.create({message:t,duration:3e3}).then(t=>t.present())}onAddTask(t){this.taskService.addTask(t).then(()=>{this.showToast("\u65b0\u589e\u6210\u529f : D"),this.router.navigateByUrl("/menu/task-list")},t=>{this.showToast("\u65b0\u589e\u5931\u6557 :(")})}onUpdateTask(t){this.taskService.updateTask(t).then(()=>{this.showToast("\u5132\u5b58\u6210\u529f : D")},t=>{this.showToast("\u5132\u5b58\u5931\u6557 :(")})}onDeleteTask(t){this.taskService.deleteTask(t.id).then(()=>{this.showToast("\u522a\u9664\u6210\u529f : D"),this.router.navigateByUrl("/menu/task-list")},t=>{this.showToast("\u522a\u9664\u5931\u6557 :(")})}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(r.a),l.Kb(a.a),l.Kb(a.g),l.Kb(n.L))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-task-details"]],decls:8,vars:1,consts:[["slot","start"],["autoHide","false"],[3,"selectedTask","createTask","updateTask","deleteTask"]],template:function(t,e){1&t&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar"),l.Nb(2,"ion-buttons",0),l.Lb(3,"ion-menu-button",1),l.Mb(),l.Nb(4,"ion-title"),l.lc(5,"\u4efb\u52d9\u8cc7\u6599"),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"ion-content"),l.Nb(7,"app-task-form",2),l.Vb("createTask",(function(t){return e.onAddTask(t)}))("updateTask",(function(t){return e.onUpdateTask(t)}))("deleteTask",(function(t){return e.onDeleteTask(t)})),l.Mb(),l.Mb()),2&t&&(l.Ab(7),l.cc("selectedTask",e.task))},directives:[n.m,n.C,n.f,n.u,n.B,n.i,d],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(f)],a.j]}),t})(),h=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(e){return new(e||t)},imports:[[i.c,n.D,b.g,b.n]]}),t})(),N=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(e){return new(e||t)},imports:[[i.c,n.D,k,h]]}),t})()}}]);