{"version":3,"sources":["webpack:///src/app/components/task-share/task-form/task-form.component.html","webpack:///src/app/pages/task-details/task-details.page.html","webpack:///src/app/components/task-share/task-form/task-form.component.scss","webpack:///src/app/components/task-share/task-form/task-form.component.ts","webpack:///src/app/components/task-share/task-share.module.ts","webpack:///src/app/pages/task-details/task-details-routing.module.ts","webpack:///src/app/pages/task-details/task-details.module.ts","webpack:///src/app/pages/task-details/task-details.page.scss","webpack:///src/app/pages/task-details/task-details.page.ts"],"names":["TaskFormComponent","formBuilder","createTask","updateTask","deleteTask","initialForm","changes","selectedTask","currentValue","undefined","updateForm","staff","control","staffs","push","index","removeAt","newTask","emit","value","task","taskForm","group","id","solarCalendar","lunarCalendar","caseName","location","hall","event","jobContent","funeral","funeralWorkerCount","min","inOut","inOutWorkerCount","arriveHallTime","receiveBodyTime","casketingTime","moveCoffinTime","worshipTime","array","initSatffs","remarks","leader","isCaseClosed","length","forEach","patchValue","taskControls","markAsPristine","controls","get","selector","template","components","TaskShareModule","imports","declarations","exports","routes","path","component","TaskDetailsPageRoutingModule","forChild","TaskDetailsPageModule","TaskDetailsPage","taskService","activateRoute","router","toastCtrl","snapshot","paramMap","getTask","subscribe","console","log","msg","create","message","duration","then","toast","present","addTask","showToast","navigateByUrl","err"],"mappings":"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","file":"task-details-task-details-module-es5.js","sourcesContent":["export default \"<form [formGroup]=\\\"taskForm\\\">\\n  <!-- TODO: angular Material DatePicker -->\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">國曆</ion-label>\\n    <ion-datetime formControlName=\\\"solarCalendar\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <!-- TODO: angular Material DatePicker -->\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">農曆</ion-label>\\n    <ion-datetime formControlName=\\\"lunarCalendar\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">案名</ion-label>\\n    <ion-input formControlName=\\\"caseName\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">廳堂</ion-label>\\n    <ion-input formControlName=\\\"hall\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">到廳堂時間</ion-label>\\n    <ion-datetime formControlName=\\\"arriveHallTime\\\" displayFormat=\\\"h:mm a\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">領屍時間</ion-label>\\n    <ion-datetime formControlName=\\\"receiveBodyTime\\\" displayFormat=\\\"h:mm a\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">入殮時間</ion-label>\\n    <ion-datetime formControlName=\\\"casketingTime\\\" displayFormat=\\\"h:mm a\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">動遷棺時間</ion-label>\\n    <ion-datetime formControlName=\\\"moveCoffinTime\\\" displayFormat=\\\"h:mm a\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">家祭時間</ion-label>\\n    <ion-datetime formControlName=\\\"worshipTime\\\" displayFormat=\\\"h:mm a\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <ion-list lines=\\\"full\\\" formGroupName=\\\"jobContent\\\">\\n    <ion-list-header>\\n      <ion-label>工作內容</ion-label>\\n    </ion-list-header>\\n    <ion-item>\\n      <ion-label>出殯</ion-label>\\n      <ion-checkbox formControlName=\\\"funeral\\\" slot=\\\"start\\\"></ion-checkbox>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">人數</ion-label>\\n      <ion-input formControlName=\\\"funeralWorkerCount\\\" type=\\\"number\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>出入現</ion-label>\\n      <ion-checkbox formControlName=\\\"inOut\\\" slot=\\\"start\\\"></ion-checkbox>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">人數</ion-label>\\n      <ion-input formControlName=\\\"inOutWorkerCount\\\" type=\\\"number\\\"></ion-input>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-list lines=\\\"full\\\">\\n    <ion-list-header>\\n      <ion-label>工作人員</ion-label>\\n    </ion-list-header>\\n    <ion-item lines=\\\"full\\\" formArrayName=\\\"staffs\\\">\\n      <div *ngFor=\\\"let staff of staffs.controls; let index=index\\\">\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">人員 {{ index + 1 }}</ion-label>\\n          <ion-input [formControlName]=\\\"index\\\" type=\\\"text\\\"></ion-input>\\n          <ion-button slot=\\\"end\\\" size=\\\"small\\\" color=\\\"danger\\\" (click)=\\\"removeStaff(index)\\\">\\n            <ion-icon name=\\\"trash-outline\\\"></ion-icon>\\n          </ion-button>\\n        </ion-item>\\n      </div>\\n    </ion-item>\\n    <ion-button size=\\\"small\\\" color=\\\"primary\\\" (click)=\\\"addStaff()\\\">\\n      <ion-icon name=\\\"add-outline\\\"></ion-icon>新增人員\\n    </ion-button>\\n  </ion-list>\\n\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">地點</ion-label>\\n    <ion-input formControlName=\\\"location\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">事件</ion-label>\\n    <ion-input formControlName=\\\"event\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">備註</ion-label>\\n    <ion-input formControlName=\\\"remarks\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">執案人</ion-label>\\n    <ion-input formControlName=\\\"leader\\\" type=\\\"text\\\"></ion-input>\\n  </ion-item>\\n\\n  <!-- TODO: add material slide toggle (metrial): 進行中/結案 -->\\n  <ion-radio-group lines=\\\"full\\\" formControlName=\\\"isCaseClosed\\\">\\n    <ion-list-header>\\n      <ion-label>狀態</ion-label>\\n    </ion-list-header>\\n    <ion-item>\\n      <ion-label>進行中</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"onTheWay\\\"></ion-radio>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>已結案</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"theEnd\\\"></ion-radio>\\n    </ion-item>\\n  </ion-radio-group>\\n\\n  <ion-footer *ngIf=\\\"!taskControls.id.value\\\">\\n    <ion-toolbar color=\\\"success\\\">\\n      <ion-button expand=\\\"full\\\" fill=\\\"clear\\\" color=\\\"light\\\" (click)=\\\"onAddTask(taskForm)\\\">\\n        <ion-icon name=\\\"checkmark\\\" slot=\\\"start\\\"></ion-icon>\\n        新增任務\\n      </ion-button>\\n    </ion-toolbar>\\n  </ion-footer>\\n\\n  <ion-footer *ngIf=\\\"taskControls.id.value\\\">\\n    <ion-row no-padding text-center>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" color=\\\"danger\\\" (click)=\\\"onDeleteTask(taskForm.value)\\\">\\n          <ion-icon name=\\\"trash\\\" slot=\\\"start\\\"></ion-icon>\\n          刪除\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"success\\\" (click)=\\\"onUpdateTask(taskForm.value)\\\">\\n          <ion-icon name=\\\"save\\\" slot=\\\"start\\\"></ion-icon>\\n          存檔\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-footer>\\n</form>\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>任務資料</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <app-task-form (createTask)=\\\"onAddTask($event)\\\" [selectedTask]=\\\"task\\\" (updateTask)=\\\"onUpdateTask($event)\\\"\\r\\n    (deleteTask)=\\\"onDeleteTask($event)\\\"></app-task-form>\\r\\n\\r\\n</ion-content>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdGFzay1zaGFyZS90YXNrLWZvcm0vdGFzay1mb3JtLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Task } from './../../../@core/data/domain/model';\nimport { Component, OnInit, Output, EventEmitter, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, FormArray, FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'app-task-form',\n  templateUrl: './task-form.component.html',\n  styleUrls: ['./task-form.component.scss'],\n})\nexport class TaskFormComponent implements OnInit, OnChanges {\n  @Input() selectedTask: Task;\n  @Output() createTask = new EventEmitter();\n  @Output() updateTask = new EventEmitter();\n  @Output() deleteTask = new EventEmitter();\n\n  taskForm: FormGroup;\n\n  get taskControls() {\n    return this.taskForm.controls;\n  }\n\n  get staffs() {\n    return this.taskForm.get('staffs') as FormArray;\n  }\n\n  constructor(private formBuilder: FormBuilder) {\n    this.initialForm();\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.selectedTask.currentValue === null || changes.selectedTask.currentValue === undefined) {\n      this.initialForm();\n    }\n\n    if (changes.selectedTask.currentValue !== null && changes.selectedTask.currentValue !== undefined) {\n      this.updateForm(changes.selectedTask.currentValue);\n    }\n  }\n\n  addStaff() {\n    const staff = this.formBuilder.control('');\n    this.staffs.push(staff);\n  }\n\n  removeStaff(index: number) {\n    this.staffs.removeAt(index);\n  }\n\n  onAddTask(newTask: FormGroup) {\n    this.createTask.emit(newTask.value);\n  }\n\n  onUpdateTask(task: Task) {\n    this.updateTask.emit(task);\n  }\n\n  onDeleteTask(task: Task) {\n    this.deleteTask.emit(task);\n  }\n\n  private initialForm() {\n    this.taskForm = this.formBuilder.group({\n      id: [null],\n      solarCalendar: [null],\n      lunarCalendar: [null],\n      caseName: [''],\n      location: [''],\n      hall: [''],\n      event: [''],\n      jobContent: this.formBuilder.group({\n        funeral: [null],\n        funeralWorkerCount: [null, [Validators.min(0)]],\n        inOut: [null],\n        inOutWorkerCount: [null, [Validators.min(0)]],\n      }),\n      arriveHallTime: [null],\n      receiveBodyTime: [null],\n      casketingTime: [null],\n      moveCoffinTime: [null],\n      worshipTime: [null],\n      staffs: this.formBuilder.array([this.initSatffs()]),\n      remarks: [''],\n      leader: [''],\n      isCaseClosed: [null],\n    });\n\n  }\n\n  private initSatffs(): FormControl {\n    return this.formBuilder.control('');\n  }\n\n  private updateForm(changes: Task) {\n    if (changes === undefined || changes === null) {\n      return;\n    }\n    while (this.staffs.length !== 0) {\n      this.staffs.removeAt(0);\n    }\n\n    if (changes.staffs !== null && changes.staffs !== undefined) {\n      changes.staffs.forEach((staff) => {\n        return this.staffs.push(new FormControl(staff));\n      });\n    }\n\n    this.taskForm.patchValue({\n      id: (changes.id !== undefined) ? changes.id : null,\n      solarCalendar:\n        (changes.solarCalendar !== undefined) ? changes.solarCalendar : this.taskControls.solarCalendar.value,\n      lunarCalendar:\n        (changes.lunarCalendar !== undefined) ? changes.lunarCalendar : this.taskControls.lunarCalendar,\n      caseName:\n        (changes.caseName !== undefined) ? changes.caseName : this.taskControls.caseName.value,\n      location: (changes.location !== undefined) ? changes.location : this.taskControls.location.value,\n      hall: (changes.hall !== undefined) ? changes.hall : this.taskControls.hall.value,\n      event: (changes.event !== undefined) ? changes.event : this.taskControls.event.value,\n      jobContent: (changes.jobContent !== undefined) ? changes.jobContent : this.taskControls.jobContent.value,\n      arriveHallTime: (changes.arriveHallTime !== undefined) ? changes.arriveHallTime : this.taskControls.arriveHallTime.value,\n      receiveBodyTime: (changes.receiveBodyTime !== undefined) ? changes.receiveBodyTime : this.taskControls.receiveBodyTime.value,\n      casketingTime: (changes.casketingTime !== undefined) ? changes.casketingTime : this.taskControls.casketingTime.value,\n      moveCoffinTime: (changes.moveCoffinTime !== undefined) ? changes.moveCoffinTime : this.taskControls.moveCoffinTime.value,\n      worshipTime: (changes.worshipTime !== undefined) ? changes.worshipTime : this.taskControls.worshipTime.value,\n      remarks: (changes.remarks !== undefined) ? changes.remarks : this.taskControls.remarks.value,\n      leader: (changes.leader !== undefined) ? changes.leader : this.taskControls.leader.value,\n      isCaseClosed: (changes.isCaseClosed !== undefined) ? changes.isCaseClosed : this.taskControls.isCaseClosed.value,\n    });\n\n    this.taskForm.markAsPristine();\n  }\n\n}\n","import { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TaskFormComponent } from './../../components/task-share/task-form/task-form.component';\n\nconst components = [\n  TaskFormComponent,\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [...components],\n  exports: [...components],\n})\nexport class TaskShareModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TaskDetailsPage } from './task-details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TaskDetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TaskDetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { TaskDetailsPageRoutingModule } from './task-details-routing.module';\nimport { TaskDetailsPage } from './task-details.page';\nimport { TaskShareModule } from './../../components/task-share/task-share.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    TaskDetailsPageRoutingModule,\n    TaskShareModule,\n  ],\n  declarations: [TaskDetailsPage]\n})\nexport class TaskDetailsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Rhc2stZGV0YWlscy90YXNrLWRldGFpbHMucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { TaskService } from 'src/app/services/task.service';\r\nimport { Task } from 'src/app/@core/data/domain/model';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-task-details',\r\n  templateUrl: './task-details.page.html',\r\n  styleUrls: ['./task-details.page.scss'],\r\n})\r\nexport class TaskDetailsPage implements OnInit {\r\n\r\n  task = new Task();\r\n  id = null;\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private activateRoute: ActivatedRoute,\r\n    private router: Router,\r\n    private toastCtrl: ToastController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.id = this.activateRoute.snapshot.paramMap.get('id');\r\n    if (this.id) {\r\n      this.taskService.getTask(this.id).subscribe((task) => {\r\n        this.task = task;\r\n        console.log('this.task:', this.task);\r\n      });\r\n    } else {\r\n      this.task = null;\r\n    }\r\n  }\r\n\r\n  showToast(msg) {\r\n    this.toastCtrl.create({\r\n      message: msg,\r\n      duration: 3000,\r\n    }).then(toast => toast.present());\r\n  }\r\n\r\n  onAddTask(newTask: Task) {\r\n    this.taskService.addTask(newTask).then(() => {\r\n      this.showToast('新增成功 : D');\r\n      this.router.navigateByUrl('/menu/task-list');\r\n    }, err => {\r\n      this.showToast('新增失敗 :(');\r\n    });\r\n  }\r\n\r\n  onUpdateTask(task: Task) {\r\n    this.taskService.updateTask(task).then(() => {\r\n      this.showToast('儲存成功 : D');\r\n    }, err => {\r\n      this.showToast('儲存失敗 :(');\r\n    });\r\n  }\r\n\r\n  onDeleteTask(task: Task) {\r\n    this.taskService.deleteTask(task.id).then(() => {\r\n      this.showToast('刪除成功 : D');\r\n      this.router.navigateByUrl('/menu/task-list');\r\n    }, err => {\r\n      this.showToast('刪除失敗 :(');\r\n    });\r\n  }\r\n\r\n  // load() {\r\n  //   this.http.get(\"assets/data/products.json\").subscribe((data: any) => {\r\n  //     this.products = data.products;\r\n  //   });\r\n  // }\r\n\r\n}\r\n"]}