function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Cqzs:function(e,t,o){"use strict";o.r(t),o.d(t,"TaskDetailsPageModule",(function(){return M}));var n=o("ofXK"),i=o("TEn/"),a=o("tyNb"),l=o("mu6R"),s=o("fXoL"),r=o("i6c7"),b=o("3Pt+");function c(e,t){if(1&e){var o=s.Ob();s.Nb(0,"div"),s.Nb(1,"ion-item"),s.Nb(2,"ion-label",2),s.lc(3),s.Mb(),s.Lb(4,"ion-input",29),s.Nb(5,"ion-button",30),s.Vb("click",(function(){s.hc(o);var e=t.index;return s.Xb().removeStaff(e)})),s.Lb(6,"ion-icon",31),s.Mb(),s.Mb(),s.Mb()}if(2&e){var n=t.index;s.Ab(3),s.mc("\u4eba\u54e1 ",n+1,""),s.Ab(1),s.cc("formControlName",n)}}function u(e,t){if(1&e){var o=s.Ob();s.Nb(0,"ion-footer"),s.Nb(1,"ion-toolbar",32),s.Nb(2,"ion-button",33),s.Vb("click",(function(){s.hc(o);var e=s.Xb();return e.onAddTask(e.taskForm)})),s.Lb(3,"ion-icon",34),s.lc(4," \u65b0\u589e\u4efb\u52d9 "),s.Mb(),s.Mb(),s.Mb()}}function m(e,t){if(1&e){var o=s.Ob();s.Nb(0,"ion-footer"),s.Nb(1,"ion-row",35),s.Nb(2,"ion-col",36),s.Nb(3,"ion-button",37),s.Vb("click",(function(){s.hc(o);var e=s.Xb();return e.onDeleteTask(e.taskForm.value)})),s.Lb(4,"ion-icon",38),s.lc(5," \u522a\u9664 "),s.Mb(),s.Mb(),s.Nb(6,"ion-col",36),s.Nb(7,"ion-button",39),s.Vb("click",(function(){s.hc(o);var e=s.Xb();return e.onUpdateTask(e.taskForm.value)})),s.Lb(8,"ion-icon",40),s.lc(9," \u5b58\u6a94 "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}}var f,d,k,h,v,C=((f=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.createTask=new s.n,this.updateTask=new s.n,this.deleteTask=new s.n,this.initialForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){null==e.selectedTask.currentValue&&this.initialForm(),null!=e.selectedTask.currentValue&&this.updateForm(e.selectedTask.currentValue)}},{key:"addStaff",value:function(){var e=this.formBuilder.control("");this.staffs.push(e)}},{key:"removeStaff",value:function(e){this.staffs.removeAt(e)}},{key:"onAddTask",value:function(e){this.createTask.emit(e.value)}},{key:"onUpdateTask",value:function(e){this.updateTask.emit(e)}},{key:"onDeleteTask",value:function(e){this.deleteTask.emit(e)}},{key:"initialForm",value:function(){this.taskForm=this.formBuilder.group({id:[null],solarCalendar:[null],lunarCalendar:[null],caseName:[""],location:[""],hall:[""],event:[""],jobContent:this.formBuilder.group({funeral:[null],funeralWorkerCount:[null,[b.o.min(0)]],inOut:[null],inOutWorkerCount:[null,[b.o.min(0)]]}),arriveHallTime:[null],receiveBodyTime:[null],casketingTime:[null],moveCoffinTime:[null],worshipTime:[null],staffs:this.formBuilder.array([this.initSatffs()]),remarks:[""],leader:[""],isCaseClosed:[null]})}},{key:"initSatffs",value:function(){return this.formBuilder.control("")}},{key:"updateForm",value:function(e){var t=this;if(null!=e){for(;0!==this.staffs.length;)this.staffs.removeAt(0);null!=e.staffs&&e.staffs.forEach((function(e){return t.staffs.push(new b.c(e))})),this.taskForm.patchValue({id:void 0!==e.id?e.id:null,solarCalendar:void 0!==e.solarCalendar?e.solarCalendar:this.taskControls.solarCalendar.value,lunarCalendar:void 0!==e.lunarCalendar?e.lunarCalendar:this.taskControls.lunarCalendar,caseName:void 0!==e.caseName?e.caseName:this.taskControls.caseName.value,location:void 0!==e.location?e.location:this.taskControls.location.value,hall:void 0!==e.hall?e.hall:this.taskControls.hall.value,event:void 0!==e.event?e.event:this.taskControls.event.value,jobContent:void 0!==e.jobContent?e.jobContent:this.taskControls.jobContent.value,arriveHallTime:void 0!==e.arriveHallTime?e.arriveHallTime:this.taskControls.arriveHallTime.value,receiveBodyTime:void 0!==e.receiveBodyTime?e.receiveBodyTime:this.taskControls.receiveBodyTime.value,casketingTime:void 0!==e.casketingTime?e.casketingTime:this.taskControls.casketingTime.value,moveCoffinTime:void 0!==e.moveCoffinTime?e.moveCoffinTime:this.taskControls.moveCoffinTime.value,worshipTime:void 0!==e.worshipTime?e.worshipTime:this.taskControls.worshipTime.value,remarks:void 0!==e.remarks?e.remarks:this.taskControls.remarks.value,leader:void 0!==e.leader?e.leader:this.taskControls.leader.value,isCaseClosed:void 0!==e.isCaseClosed?e.isCaseClosed:this.taskControls.isCaseClosed.value}),this.taskForm.markAsPristine()}}},{key:"taskControls",get:function(){return this.taskForm.controls}},{key:"staffs",get:function(){return this.taskForm.get("staffs")}}]),e}()).\u0275fac=function(e){return new(e||f)(s.Kb(b.b))},f.\u0275cmp=s.Eb({type:f,selectors:[["app-task-form"]],inputs:{selectedTask:"selectedTask"},outputs:{createTask:"createTask",updateTask:"updateTask",deleteTask:"deleteTask"},features:[s.yb],decls:96,vars:4,consts:[[3,"formGroup"],["lines","full"],["position","floating"],["formControlName","solarCalendar"],["formControlName","lunarCalendar"],["formControlName","caseName","type","text"],["formControlName","hall","type","text"],["formControlName","arriveHallTime","displayFormat","h:mm a"],["formControlName","receiveBodyTime","displayFormat","h:mm a"],["formControlName","casketingTime","displayFormat","h:mm a"],["formControlName","moveCoffinTime","displayFormat","h:mm a"],["formControlName","worshipTime","displayFormat","h:mm a"],["lines","full","formGroupName","jobContent"],["formControlName","funeral","slot","start"],["formControlName","funeralWorkerCount","type","number"],["formControlName","inOut","slot","start"],["formControlName","inOutWorkerCount","type","number"],["lines","full","formArrayName","staffs"],[4,"ngFor","ngForOf"],["size","small","color","primary",3,"click"],["name","add-outline"],["formControlName","location","type","text"],["formControlName","event","type","text"],["formControlName","remarks","type","text"],["formControlName","leader","type","text"],["lines","full","formControlName","isCaseClosed"],["slot","start","value","onTheWay"],["slot","start","value","theEnd"],[4,"ngIf"],["type","text",3,"formControlName"],["slot","end","size","small","color","danger",3,"click"],["name","trash-outline"],["color","success"],["expand","full","fill","clear","color","light",3,"click"],["name","checkmark","slot","start"],["no-padding","","text-center",""],["size","6"],["expand","block","fill","outline","color","danger",3,"click"],["name","trash","slot","start"],["expand","block","fill","solid","color","success",3,"click"],["name","save","slot","start"]],template:function(e,t){1&e&&(s.Nb(0,"form",0),s.Nb(1,"ion-item",1),s.Nb(2,"ion-label",2),s.lc(3,"\u570b\u66c6"),s.Mb(),s.Lb(4,"ion-datetime",3),s.Mb(),s.Nb(5,"ion-item",1),s.Nb(6,"ion-label",2),s.lc(7,"\u8fb2\u66c6"),s.Mb(),s.Lb(8,"ion-datetime",4),s.Mb(),s.Nb(9,"ion-item",1),s.Nb(10,"ion-label",2),s.lc(11,"\u6848\u540d"),s.Mb(),s.Lb(12,"ion-input",5),s.Mb(),s.Nb(13,"ion-item",1),s.Nb(14,"ion-label",2),s.lc(15,"\u5ef3\u5802"),s.Mb(),s.Lb(16,"ion-input",6),s.Mb(),s.Nb(17,"ion-item",1),s.Nb(18,"ion-label",2),s.lc(19,"\u5230\u5ef3\u5802\u6642\u9593"),s.Mb(),s.Lb(20,"ion-datetime",7),s.Mb(),s.Nb(21,"ion-item",1),s.Nb(22,"ion-label",2),s.lc(23,"\u9818\u5c4d\u6642\u9593"),s.Mb(),s.Lb(24,"ion-datetime",8),s.Mb(),s.Nb(25,"ion-item",1),s.Nb(26,"ion-label",2),s.lc(27,"\u5165\u6bae\u6642\u9593"),s.Mb(),s.Lb(28,"ion-datetime",9),s.Mb(),s.Nb(29,"ion-item",1),s.Nb(30,"ion-label",2),s.lc(31,"\u52d5\u9077\u68fa\u6642\u9593"),s.Mb(),s.Lb(32,"ion-datetime",10),s.Mb(),s.Nb(33,"ion-item",1),s.Nb(34,"ion-label",2),s.lc(35,"\u5bb6\u796d\u6642\u9593"),s.Mb(),s.Lb(36,"ion-datetime",11),s.Mb(),s.Nb(37,"ion-list",12),s.Nb(38,"ion-list-header"),s.Nb(39,"ion-label"),s.lc(40,"\u5de5\u4f5c\u5167\u5bb9"),s.Mb(),s.Mb(),s.Nb(41,"ion-item"),s.Nb(42,"ion-label"),s.lc(43,"\u51fa\u6baf"),s.Mb(),s.Lb(44,"ion-checkbox",13),s.Mb(),s.Nb(45,"ion-item"),s.Nb(46,"ion-label",2),s.lc(47,"\u4eba\u6578"),s.Mb(),s.Lb(48,"ion-input",14),s.Mb(),s.Nb(49,"ion-item"),s.Nb(50,"ion-label"),s.lc(51,"\u51fa\u5165\u73fe"),s.Mb(),s.Lb(52,"ion-checkbox",15),s.Mb(),s.Nb(53,"ion-item"),s.Nb(54,"ion-label",2),s.lc(55,"\u4eba\u6578"),s.Mb(),s.Lb(56,"ion-input",16),s.Mb(),s.Mb(),s.Nb(57,"ion-list",1),s.Nb(58,"ion-list-header"),s.Nb(59,"ion-label"),s.lc(60,"\u5de5\u4f5c\u4eba\u54e1"),s.Mb(),s.Mb(),s.Nb(61,"ion-item",17),s.kc(62,c,7,2,"div",18),s.Mb(),s.Nb(63,"ion-button",19),s.Vb("click",(function(){return t.addStaff()})),s.Lb(64,"ion-icon",20),s.lc(65,"\u65b0\u589e\u4eba\u54e1 "),s.Mb(),s.Mb(),s.Nb(66,"ion-item",1),s.Nb(67,"ion-label",2),s.lc(68,"\u5730\u9ede"),s.Mb(),s.Lb(69,"ion-input",21),s.Mb(),s.Nb(70,"ion-item",1),s.Nb(71,"ion-label",2),s.lc(72,"\u4e8b\u4ef6"),s.Mb(),s.Lb(73,"ion-input",22),s.Mb(),s.Nb(74,"ion-item",1),s.Nb(75,"ion-label",2),s.lc(76,"\u5099\u8a3b"),s.Mb(),s.Lb(77,"ion-input",23),s.Mb(),s.Nb(78,"ion-item",1),s.Nb(79,"ion-label",2),s.lc(80,"\u57f7\u6848\u4eba"),s.Mb(),s.Lb(81,"ion-input",24),s.Mb(),s.Nb(82,"ion-radio-group",25),s.Nb(83,"ion-list-header"),s.Nb(84,"ion-label"),s.lc(85,"\u72c0\u614b"),s.Mb(),s.Mb(),s.Nb(86,"ion-item"),s.Nb(87,"ion-label"),s.lc(88,"\u9032\u884c\u4e2d"),s.Mb(),s.Lb(89,"ion-radio",26),s.Mb(),s.Nb(90,"ion-item"),s.Nb(91,"ion-label"),s.lc(92,"\u5df2\u7d50\u6848"),s.Mb(),s.Lb(93,"ion-radio",27),s.Mb(),s.Mb(),s.kc(94,u,5,0,"ion-footer",28),s.kc(95,m,10,0,"ion-footer",28),s.Mb()),2&e&&(s.cc("formGroup",t.taskForm),s.Ab(62),s.cc("ngForOf",t.staffs.controls),s.Ab(32),s.cc("ngIf",!t.taskControls.id.value),s.Ab(1),s.cc("ngIf",t.taskControls.id.value))},directives:[b.p,b.k,b.e,i.p,i.q,i.j,i.J,b.j,b.d,i.o,i.K,i.r,b.f,i.s,i.g,i.a,i.F,b.a,n.i,i.e,i.n,i.x,i.w,i.H,n.j,i.k,i.C,i.z,i.h],styles:[""]}),f),N=[{path:"",component:(d=function(){function e(t,o,n,i){_classCallCheck(this,e),this.taskService=t,this.activateRoute=o,this.router=n,this.toastCtrl=i,this.task=new l.b,this.id=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.id=this.activateRoute.snapshot.paramMap.get("id"),this.id?this.taskService.getTask(this.id).subscribe((function(t){e.task=t})):this.task=null}},{key:"showToast",value:function(e){this.toastCtrl.create({message:e,duration:3e3}).then((function(e){return e.present()}))}},{key:"onAddTask",value:function(e){var t=this;this.taskService.addTask(e).then((function(){t.showToast("\u65b0\u589e\u6210\u529f : D"),t.router.navigateByUrl("/menu/task-list")}),(function(e){t.showToast("\u65b0\u589e\u5931\u6557 :(")}))}},{key:"onUpdateTask",value:function(e){var t=this;this.taskService.updateTask(e).then((function(){t.showToast("\u5132\u5b58\u6210\u529f : D")}),(function(e){t.showToast("\u5132\u5b58\u5931\u6557 :(")}))}},{key:"onDeleteTask",value:function(e){var t=this;this.taskService.deleteTask(e.id).then((function(){t.showToast("\u522a\u9664\u6210\u529f : D"),t.router.navigateByUrl("/menu/task-list")}),(function(e){t.showToast("\u522a\u9664\u5931\u6557 :(")}))}}]),e}(),d.\u0275fac=function(e){return new(e||d)(s.Kb(r.a),s.Kb(a.a),s.Kb(a.g),s.Kb(i.L))},d.\u0275cmp=s.Eb({type:d,selectors:[["app-task-details"]],decls:8,vars:1,consts:[["slot","start"],["autoHide","false"],[3,"selectedTask","createTask","updateTask","deleteTask"]],template:function(e,t){1&e&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-buttons",0),s.Lb(3,"ion-menu-button",1),s.Mb(),s.Nb(4,"ion-title"),s.lc(5,"\u4efb\u52d9\u8cc7\u6599"),s.Mb(),s.Mb(),s.Mb(),s.Nb(6,"ion-content"),s.Nb(7,"app-task-form",2),s.Vb("createTask",(function(e){return t.onAddTask(e)}))("updateTask",(function(e){return t.onUpdateTask(e)}))("deleteTask",(function(e){return t.onDeleteTask(e)})),s.Mb(),s.Mb()),2&e&&(s.Ab(7),s.cc("selectedTask",t.task))},directives:[i.m,i.C,i.f,i.u,i.B,i.i,C],styles:[""]}),d)}],p=((v=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:v}),v.\u0275inj=s.Hb({factory:function(e){return new(e||v)},imports:[[a.j.forChild(N)],a.j]}),v),T=((h=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:h}),h.\u0275inj=s.Hb({factory:function(e){return new(e||h)},imports:[[n.c,i.D,b.g,b.n]]}),h),M=((k=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:k}),k.\u0275inj=s.Hb({factory:function(e){return new(e||k)},imports:[[n.c,i.D,p,T]]}),k)}}]);